// src/utils/initSuperAdmin.js
import AdminModel from "../models/employees.js";
import bcrypt from "bcryptjs";
import { config } from "../config.js";

export async function ensureSuperAdminExists() {
  const existing = await AdminModel.findOne({ email: config.superadmin.EMAIL });

  if (!existing) {
    const hashedPassword = await bcrypt.hash(config.superadmin.PASSWORD, 10);
    await AdminModel.create({
      name: "Super Admin",
      email: config.superadmin.EMAIL,
      password: hashedPassword,
      role: "superadmin",
      active: true,
    });
    console.log("‚úÖ Super admin created from env config");
  } else {
    console.log("üîê Super admin already exists");
  }
}
